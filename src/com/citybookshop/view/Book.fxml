<?xml version="1.0" encoding="UTF-8"?>

<?import javafx.geometry.Insets?>
<?import javafx.scene.control.Button?>
<?import javafx.scene.control.ComboBox?>
<?import javafx.scene.control.Label?>
<?import javafx.scene.control.TableColumn?>
<?import javafx.scene.control.TableView?>
<?import javafx.scene.control.TextField?>
<?import javafx.scene.layout.AnchorPane?>
<?import javafx.scene.layout.BorderPane?>
<?import javafx.scene.layout.HBox?>
<?import javafx.scene.layout.Region?>
<?import javafx.scene.layout.VBox?>

<AnchorPane prefHeight="720.0" prefWidth="1024.0" stylesheets="@style/Book.css" xmlns="http://javafx.com/javafx/25" xmlns:fx="http://javafx.com/fxml/1" fx:controller="com.citybookshop.controller.BookController">
   <children>
      <BorderPane prefHeight="720.0" prefWidth="1024.0">

         <!-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• LEFT SIDEBAR â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->
         <left>
            <VBox prefHeight="720.0" prefWidth="260.0" spacing="0" styleClass="sidebar" BorderPane.alignment="CENTER">

               <!-- Logo Area -->
               <VBox alignment="CENTER" prefHeight="100.0" styleClass="sidebar-logo">
                  <Label styleClass="sidebar-logo-icon" text="ðŸ“š" />
                  <Label styleClass="sidebar-logo-text" text="City Bookshop" />
               </VBox>

               <!-- Menu Label -->
               <Label styleClass="sidebar-section-label" text="NAVIGATION">
                  <VBox.margin><Insets bottom="8.0" left="24.0" top="10.0" /></VBox.margin>
               </Label>

               <!-- Nav Buttons -->
               <Button fx:id="viewBooks" mnemonicParsing="false" onAction="#handleViewBooks" prefHeight="46.0" prefWidth="220.0" styleClass="nav-btn,nav-btn-active" text="ðŸ“š  View All Books">
                  <VBox.margin><Insets left="20.0" top="4.0" /></VBox.margin>
               </Button>

               <Button fx:id="searchBooks" mnemonicParsing="false" onAction="#handleSearchBooks" prefHeight="46.0" prefWidth="220.0" styleClass="nav-btn" text="ðŸ”  Search Books">
                  <VBox.margin><Insets left="20.0" top="6.0" /></VBox.margin>
               </Button>

               <Button fx:id="viewStocks" mnemonicParsing="false" onAction="#handleViewStocks" prefHeight="46.0" prefWidth="220.0" styleClass="nav-btn" text="ðŸ“¦  View Stock">
                  <VBox.margin><Insets left="20.0" top="6.0" /></VBox.margin>
               </Button>

               <!-- Spacer -->
               <Region VBox.vgrow="ALWAYS" />

               <!-- Back Button at Bottom -->
               <Button fx:id="backButton" mnemonicParsing="false" onAction="#handleBack" prefHeight="46.0" prefWidth="220.0" styleClass="nav-btn-back" text="â¬…  Back to Dashboard">
                  <VBox.margin><Insets bottom="20.0" left="20.0" /></VBox.margin>
               </Button>

            </VBox>
         </left>

         <!-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• TOP HEADER â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->
         <top>
            <HBox alignment="CENTER_LEFT" prefHeight="68.0" styleClass="topbar" BorderPane.alignment="CENTER">

               <Label styleClass="topbar-title" text="Book Management">
                  <HBox.margin><Insets left="24.0" /></HBox.margin>
               </Label>

               <Region HBox.hgrow="ALWAYS" />

               <Label fx:id="welcomeLabel" styleClass="topbar-welcome" text="Welcome" />

               <Button fx:id="logout" mnemonicParsing="false" onAction="#handleLogout" prefHeight="36.0" prefWidth="90.0" styleClass="logout-btn" text="Logout">
                  <HBox.margin><Insets left="12.0" right="20.0" /></HBox.margin>
               </Button>

            </HBox>
         </top>

         <!-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• CENTER CONTENT â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->
         <center>
            <VBox spacing="20.0" styleClass="content-area" BorderPane.alignment="CENTER">
               <padding><Insets bottom="20.0" left="28.0" right="28.0" top="28.0" /></padding>

               <!-- Page Title -->
               <Label styleClass="page-title" text="ðŸ”  Search &amp; Browse Books" />

               <!-- Search Filters Card -->
               <VBox spacing="14.0" styleClass="card">
                  <padding><Insets bottom="18.0" left="20.0" right="20.0" top="18.0" /></padding>

                  <Label styleClass="card-section-label" text="FILTERS" />

                  <HBox alignment="CENTER_LEFT" spacing="16.0">

                     <VBox spacing="6.0">
                        <Label styleClass="field-label" text="Title" />
                        <TextField fx:id="titleField" prefHeight="34.0" prefWidth="149.0" promptText="Search by title..." styleClass="search-field" />
                     </VBox>

                     <VBox spacing="6.0">
                        <Label styleClass="field-label" text="Category" />
                        <ComboBox fx:id="categoryCombo" prefHeight="30.0" prefWidth="189.0" promptText="All categories" styleClass="combo-field" />
                     </VBox>

                     <VBox spacing="6.0">
                        <Label styleClass="field-label" text="Min Price" />
                        <TextField fx:id="minPriceField" prefWidth="100.0" promptText="0.00" styleClass="search-field" />
                     </VBox>

                     <VBox spacing="6.0">
                        <Label styleClass="field-label" text="Max Price" />
                        <TextField fx:id="maxPriceField" prefHeight="34.0" prefWidth="111.0" promptText="999.99" styleClass="search-field" />
                     </VBox>

                     <Region HBox.hgrow="ALWAYS" />

                     <VBox alignment="BOTTOM_LEFT" spacing="6.0">
                        <Label styleClass="field-label" text="" />
                        <HBox spacing="10.0">
                           <Button fx:id="searchButton" mnemonicParsing="false" onAction="#handleSearch" prefHeight="34.0" prefWidth="130.0" styleClass="btn-search" text="ðŸ”  Search" />
                           <Button fx:id="clearButton" mnemonicParsing="false" onAction="#handleClear" prefHeight="34.0" prefWidth="125.0" styleClass="btn-clear" text="âœ•  Clear" />
                        </HBox>
                     </VBox>

                  </HBox>
               </VBox>

               <!-- Table Card -->
               <VBox spacing="12.0" styleClass="card" VBox.vgrow="ALWAYS">
                  <padding><Insets bottom="18.0" left="20.0" right="20.0" top="18.0" /></padding>

                  <HBox alignment="CENTER_LEFT" spacing="10.0">
                     <Label styleClass="card-section-label" text="RESULTS" />
                     <Region HBox.hgrow="ALWAYS" />
                     <Label fx:id="resultLabel" styleClass="result-label" />
                  </HBox>

                  <TableView fx:id="bookTable" styleClass="book-table" VBox.vgrow="ALWAYS">
                     <columns>
                        <TableColumn fx:id="idCol" prefWidth="70.0" text="ID" />
                        <TableColumn fx:id="titleCol" prefWidth="200.0" text="Title" />
                        <TableColumn fx:id="authorCol" prefWidth="160.0" text="Author" />
                        <TableColumn fx:id="priceCol" prefWidth="100.0" text="Price" />
                        <TableColumn fx:id="quantityCol" prefWidth="100.0" text="Quantity" />
                        <TableColumn fx:id="categoryCol" prefWidth="140.0" text="Category" />
                     </columns>
                  </TableView>

               </VBox>

            </VBox>
         </center>

      </BorderPane>
   </children>
</AnchorPane>
